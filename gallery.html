<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <title>Gallery</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Research Lab, Home, University of Calgary">
      <meta name="author" content="">
      <!-- Le styles -->
      <link href="css/bootstrap.min.css" rel="stylesheet">
      <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
      <link href="css/theme.css" rel="stylesheet">
      <link href="css/blueimp-gallery.min.css" rel="stylesheet">
      <link href="css/blueimp-gallery-video.css" rel="stylesheet">
      <style>
        /* Add this style for the video play button overlay */
        .video-play-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: rgba(0,0,0,0.7);
            border-radius: 50%;
            color: white;
            font-size: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
        }
        .video-play-overlay:hover {
            background: rgba(0,0,0,0.9);
        }
        .blueimp-gallery > .slides > .slide > .video-content > video {
            width: 100%;
            height: auto;
        }
      </style>
   </head>
   <body>
      <div class="container">
         <header class="jumbotron subhead" id="overview">
            <p class="lead"> University of Calgary </p>
            <h1>Geospatial Sensing and Intelligence Lab (GSIL)</h1>
         </header>
         <div class="masthead">
            <div class="navbar">
               <div class="navbar-inner">
                  <div class="container">
                     <ul class="nav">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="people.html">People</a></li>
                        <li><a href="research.html">Research</a></li>
                        <li><a href="publications.html">Publications</a></li>
                        <li class="active"><a href="gallery.html">Gallery</a></li>
                        <li><a href="links.html">Links</a></li>
                        <li><a href="teaching.html">Teaching</a></li>
                        <li><a href="contact.html">Contact</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
         <hr>
         <div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls">
            <div class="slides"></div>
            <h3 class="title"> Gallery </h3>
            <a class="prev">‹</a>
            <a class="next">›</a>
            <a class="close">×</a>
            <a class="play-pause"></a>
            <ol class="indicator"></ol>
         </div>
         <div class="row-fluid">
            <div class="span3 bs-docs-sidebar" id="navparent">
               <ul class="nav nav-list bs-docs-sidenav" data-spy="affix" data-offset-top="200" data-offset-bottom="260">
                  <li><a href="#imagegallery1"> Pan-Arctic sea ice mapping </a></li>
                  <li><a href="#imagegallery2"> Arctic species detection </a></li>
               </ul>
            </div>
            <div class="span8 offset1">
               <section id="imagegallery1">
                  <div class="page-header">
                     <h3>Pan-Arctic sea ice mapping</h3>
                  </div>
                  <div class="row-fluid">
                     <ul class="thumbnails da-thumbs">
                        <li class="span4">
                           <a title="Pan-Arctic sea ice mosaic image generated by our system using 110 Sentinel-1 SAR scenes of about 22.4GB. 
                              The spatial resolution of the image is 40 meters. 
                              The size of the image is 110k-by-140k, with about 15 billion pixels." 
                              href="https://www.gsilab.ca/images/arctic_300_compat.mp4" 
                              class="thumbnail" 
                              data-gallery
                              data-type="video/mp4">
                              <video width="100%" preload="auto" playsinline muted>
                                 <source src="https://www.gsilab.ca/images/arctic_300_compat.mp4" type="video/mp4">
                                 Your browser does not support HTML5 video.
                              </video>
                           </a>
                           <p class="caption"> Pan-Arctic sea ice video </p>
                        </li>
                        <li class="span4">
                           <a title="Purus faucibus ornare suspendisse sed nisi. Velit laoreet id donec ultrices tincidunt arcu non sodales neque. Tortor at risus viverra adipiscing at in." href="images/israel-palacio-778505-unsplash.jpg" class="thumbnail">
                           <img alt="" src="images/israel-palacio-778505-unsplash.jpg" style="width: 187px; height: 125px;">
                           </a>
                           <p class="caption"> Purus faucibus ornare suspendisse sed nisi. </p>
                        </li>
                        <li class="span4">
                           <a title="Tortor aliquam nulla facilisi cras fermentum odio eu feugiat pretium. Ante in nibh mauris cursus mattis molestie. Morbi tincidunt ornare massa eget egestas purus." href="images/plants-in-beakers.jpg" class="thumbnail">
                           <img alt="" src="images/plants-in-beakers.jpg" style="width: 187px; height: 125px;">
                           </a>
                           <p class="caption"> Tortor aliquam nulla facilisi cras fermentum odio eu feugiat pretium. </p>
                        </li>
                     </ul>
                  </div>
                  <!-- [Rest of your existing gallery content remains exactly the same] -->
               </section>
               <section id="imagegallery2">
                  <!-- [Your existing image gallery 2 content remains exactly the same] -->
               </section>
            </div>
         </div>
      </div>
      <footer id="footer">
         <!-- [Your existing footer content remains exactly the same] -->
      </footer>

      <script src="js/jquery-1.9.1.min.js"></script>
      <script src="js/bootstrap.min.js"></script>
      <script src="js/blueimp-gallery.min.js"></script>
      <script src="js/blueimp-gallery-video.js"></script>
      
      <script>
      $(document).ready(function() {
         $(document.body).scrollspy({
            target: "#navparent"
         });
         
         // Custom function to handle video playback with Chrome restrictions
         function handleVideoPlayback(video) {
            // First try to play with sound
            video.muted = false;
            var playPromise = video.play();
            
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    // If failed, try muted playback
                    video.muted = true;
                    video.play().catch(e => {
                        // If still failed, show play button
                        showPlayButton(video);
                    });
                });
            }
         }
         
         // Function to show play button overlay
         function showPlayButton(video) {
            var container = video.parentNode;
            var playBtn = document.createElement('div');
            playBtn.className = 'video-play-overlay';
            playBtn.innerHTML = '▶';
            playBtn.onclick = function() {
                video.play()
                    .then(() => this.remove())
                    .catch(e => console.log("Playback failed:", e));
            };
            container.appendChild(playBtn);
         }
         
         // Initialize gallery with Chrome-friendly video handling
         document.getElementById('imagegallery1').onclick = function (event) {
            event = event || window.event;
            var target = event.target || event.srcElement,
                link = target.src ? target.parentNode : target,
                options = {
                    index: link, 
                    event: event,
                    toggleControlsOnEnter: true,
                    closeOnSlideClick: true,
                    onslide: function(index, slide) {
                        // Handle video playback when slide changes
                        var video = slide.getElementsByTagName('video')[0];
                        if (video) {
                            handleVideoPlayback(video);
                        }
                    },
                    onopen: function() {
                        // Handle video playback when gallery opens
                        var video = this.list[this.index].getElementsByTagName('video')[0];
                        if (video) {
                            handleVideoPlayback(video);
                        }
                    }
                },
                links = this.getElementsByTagName('a');
            blueimp.Gallery(links, options);
            return false;
         };
         
         document.getElementById('imagegallery2').onclick = function (event) {
            event = event || window.event;
            var target = event.target || event.srcElement,
                link = target.src ? target.parentNode : target,
                options = {index: link, event: event},
                links = this.getElementsByTagName('a');
            blueimp.Gallery(links, options);
            return false;
         };
      });
      </script>
   </body>
</html>
