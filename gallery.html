<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Gallery</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Load all assets from CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/blueimp-gallery/3.3.1/css/blueimp-gallery.min.css" rel="stylesheet">
    <style>
        /* YouTube Thumbnail Styles */
        .youtube-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            margin-bottom: 15px;
        }
        .youtube-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        .youtube-thumbnail {
            position: relative;
            cursor: pointer;
        }
        .youtube-play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 68px;
            height: 48px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24L27 14v20" fill="white"/></svg>') no-repeat;
            background-size: contain;
        }
    </style>
</head>
<body>
    <div class="container py-4">
        <!-- Header and Navigation (unchanged) -->
        <header class="jumbotron bg-light p-4 mb-4 rounded">
            <h1>Geospatial Sensing and Intelligence Lab (GSIL)</h1>
            <p class="lead">University of Calgary</p>
        </header>

        <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
            <div class="container-fluid">
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="people.html">People</a></li>
                        <li class="nav-item"><a class="nav-link" href="research.html">Research</a></li>
                        <li class="nav-item"><a class="nav-link" href="publications.html">Publications</a></li>
                        <li class="nav-item"><a class="nav-link active" href="gallery.html">Gallery</a></li>
                        <li class="nav-item"><a class="nav-link" href="links.html">Links</a></li>
                        <li class="nav-item"><a class="nav-link" href="teaching.html">Teaching</a></li>
                        <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="row">
            <div class="col-md-3">
                <div class="sticky-top pt-3">
                    <h4>Gallery Sections</h4>
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link" href="#sea-ice">Sea Ice Mapping</a></li>
                        <li class="nav-item"><a class="nav-link" href="#species">Species Detection</a></li>
                    </ul>
                </div>
            </div>

            <div class="col-md-9">
                <!-- YouTube Video Section with Fallback -->
                <section id="sea-ice" class="mb-5">
                    <h2 class="mb-4">Pan-Arctic Sea Ice Mapping</h2>
                    
                    <div class="row">
                        <div class="col-lg-8">
                            <!-- Primary YouTube Embed -->
                            <div class="youtube-container mb-4">
                                <iframe id="youtube-embed" 
                                    src="https://www.youtube.com/embed/rcfli-XRfmw?enablejsapi=1" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                            
                            <!-- Fallback Message -->
                            <div id="youtube-fallback" class="alert alert-warning d-none">
                                <p>YouTube embed blocked. <button id="load-video-fallback" class="btn btn-sm btn-primary">Click here</button> to load video directly.</p>
                                <div id="video-fallback-container" class="mt-3 d-none">
                                    <video controls class="w-100">
                                        <source src="https://example.com/fallback-video.mp4" type="video/mp4">
                                        Your browser does not support HTML5 video.
                                    </video>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4">
                            <h4>About This Research</h4>
                            <p>Our system processes 110 Sentinel-1 SAR scenes (22.4GB) to create pan-Arctic sea ice maps at 40m resolution.</p>
                            <div class="card mb-3">
                                <img src="https://via.placeholder.com/300x200?text=Sample+Image" class="card-img-top" alt="Sample">
                                <div class="card-body">
                                    <p class="card-text">Sample sea ice classification</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Thumbnail Gallery -->
                <section id="species" class="mb-5">
                    <h2 class="mb-4">Arctic Species Detection</h2>
                    <div class="row">
                        <!-- Thumbnail 1 -->
                        <div class="col-md-4 mb-4">
                            <div class="youtube-thumbnail" data-video-id="rcfli-XRfmw">
                                <img src="https://via.placeholder.com/300x200?text=Species+1" class="img-fluid rounded" alt="Species 1">
                                <div class="youtube-play-button"></div>
                            </div>
                            <p class="mt-2">Polar bear detection</p>
                        </div>
                        
                        <!-- Thumbnail 2 -->
                        <div class="col-md-4 mb-4">
                            <img src="https://via.placeholder.com/300x200?text=Species+2" class="img-fluid rounded" alt="Species 2">
                            <p class="mt-2">Walrus habitat mapping</p>
                        </div>
                        
                        <!-- Thumbnail 3 -->
                        <div class="col-md-4 mb-4">
                            <img src="https://via.placeholder.com/300x200?text=Species+3" class="img-fluid rounded" alt="Species 3">
                            <p class="mt-2">Seal population analysis</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-light py-4 mt-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h3>Contact</h3>
                    <p>Email: <a href="mailto:linlin.xu@ucalgary.ca">linlin.xu@ucalgary.ca</a></p>
                    <p>Phone: 548-994-0989</p>
                </div>
                <div class="col-md-6">
                    <h3>Location</h3>
                    <p>2500 University Dr NW, Calgary, AB, Canada</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- YouTube API and Fallback Logic -->
    <script>
    $(document).ready(function() {
        // Check if YouTube embed is blocked
        function checkYouTube() {
            return new Promise((resolve) => {
                const iframe = document.getElementById('youtube-embed');
                if (!iframe) return resolve(false);
                
                iframe.onload = function() {
                    try {
                        // This will throw an error if blocked
                        if (iframe.contentWindow.document) {
                            resolve(true);
                        }
                    } catch (e) {
                        resolve(false);
                    }
                };
                
                // Timeout fallback
                setTimeout(() => {
                    try {
                        if (iframe.contentWindow.document) {
                            resolve(true);
                        }
                    } catch (e) {
                        resolve(false);
                    }
                }, 2000);
            });
        }

        // Initialize
        checkYouTube().then((success) => {
            if (!success) {
                $('#youtube-fallback').removeClass('d-none');
            }
        });

        // Fallback button handler
        $('#load-video-fallback').click(function() {
            $('#video-fallback-container').removeClass('d-none');
            $(this).prop('disabled', true);
        });

        // Thumbnail click handlers
        $('.youtube-thumbnail').click(function() {
            const videoId = $(this).data('video-id');
            $('#youtube-embed').attr('src', `https://www.youtube.com/embed/${videoId}?autoplay=1`);
            $('html, body').animate({
                scrollTop: $('#sea-ice').offset().top
            }, 500);
        });
    });
    </script>
</body>
</html>
